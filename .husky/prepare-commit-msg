#!/bin/sh

COMMIT_MSG_FILE=$1
COMMIT_MSG=$(cat "$COMMIT_MSG_FILE")

# Skip if message already has an emoji
if echo "$COMMIT_MSG" | grep -qP '^\p{Emoji}'; then
  exit 0
fi

# Add emoji based on commit type
add_emoji() {
  case "$1" in
    feat*)     echo "âœ¨ $1" ;;
    fix*)      echo "ðŸ› $1" ;;
    docs*)     echo "ðŸ“š $1" ;;
    style*)    echo "ðŸ’Ž $1" ;;
    refactor*) echo "â™»ï¸ $1" ;;
    perf*)     echo "ðŸš€ $1" ;;
    test*)     echo "ðŸ§ª $1" ;;
    build*)    echo "ðŸ“¦ $1" ;;
    ci*)       echo "ðŸ‘· $1" ;;
    chore*)    echo "ðŸ”§ $1" ;;
    revert*)   echo "âª $1" ;;
    *)         echo "$1" ;;
  esac
}

add_emoji "$COMMIT_MSG" > "$COMMIT_MSG_FILE"
